<div class="content-header border-bottom mb-4">
    <h1>User Management</h1>
</div>

<div class="content">
    <h4>All Users</h4>
    <div class="table-responsive">
        <table class="table table-striped table-sm">
            <thead>
                <tr>
                    <th>id</th>
                    <th>username</th>
                    <!-- <th>password</th> -->
                    <th>permissions</th>
                    <th>enabled</th>
                </tr>
            </thead>
    
            <tbody *ngFor="let user of users">
                <tr>
                    <td>{{user.id}}</td>
                    <td>{{user.username}}</td>
                    <!-- <td>{{user.password}}</td> -->
                    <td>
                        {{user.permissions}}
                        <a (click)="editPermissions(content, user)" style="cursor: pointer; color: Tomato;" data-toggle="modal"
                            data-target="#exampleModal">
                            <i class="fas fa-pen-square"></i>
                        </a>
                    </td>
                    <td>{{user.enabled}}</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>


<!-- Edit User Permissions Modal -->
<ng-template #content let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Permissions for "{{editingUser.username}}"</h4>
        <button (click)="modal.dismiss()" type="button" class="close btn-close" data-dismiss="modal" aria-label="Close"></button>
    </div>
    
    <div class="modal-body">
        <div class="form-check" *ngFor="let permission of permissionsStr()">
            <input class="form-check-input" type="checkbox" [(ngModel)]="editingPermissions[permission]"
                id="{{permission}}">
            <label class="form-check-label" for="{{permission}}">
                {{permission}}
            </label>
        </div>
    </div>
    
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="modal.close()">Cancel</button>
        <button (click)="savePermissions()" type="button" class="btn btn-primary" (click)="modal.close()">Save
            changes</button>
    </div>
</ng-template>